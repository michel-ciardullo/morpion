const L=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}};L();const v=class{constructor(t=[]){this.states=t.length>0?t:v.createStates()}getAvailable(){return this.states.filter(t=>t<=0)}getStates(){return this.states}hasStateAvailable(t){return this.states[t]<=0}setState(t,e){return this.hasStateAvailable(t)?(this.states[t]=e,!0):!1}winner(){for(let t=0;t<v.WINNER_SITUATIONS.length;t++){const e=v.WINNER_SITUATIONS[t],i=e[0];if(this.states[i]===1||this.states[i]===2){const r=e[1],s=e[2];if(this.states[i]===this.states[r]&&this.states[r]===this.states[s])return this.states[i]}}return 0}isTie(){return this.getAvailable().length===0&&this.winner()===0}isTerminal(){return this.winner()===1||this.winner()===2||this.isTie()}static createStates(){const t=[0];for(let e=1;e<9;e++)t.push(-e);return t}};let y=v;y.WINNER_SITUATIONS=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];var c;(function(t){t[t.X=1]="X",t[t.O=2]="O"})(c||(c={}));var h;(function(t){t[t.Bot=0]="Bot",t[t.Human=1]="Human"})(h||(h={}));class I{constructor(e=-1){this.maxDepth=e,this.nodes=new Map}playBestMove(e,i,r=!0,s){if(i==0&&this.nodes.clear(),e.isTerminal()||i===this.maxDepth)return e.winner()===c.X?1/0-i:e.winner()===c.O?-1/0+i:0;let n;return r?(n=-1/0,e.getAvailable().forEach(o=>{const f=Math.abs(o),p=I.createNewBoard(e,f,c.X),u=this.playBestMove(p,i+1,!1,s);if(n=Math.max(n,u),i==0){const a=this.nodes.has(u)?`${this.nodes.get(u)},${f}`:`${f}`;this.nodes.set(u,a)}})):(n=1/0,e.getAvailable().forEach(o=>{const f=Math.abs(o),p=I.createNewBoard(e,f,c.O),u=this.playBestMove(p,i+1,!0,s);if(n=Math.min(n,u),i==0){const a=this.nodes.has(u)?`${this.nodes.get(u)},${f}`:`${f}`;this.nodes.set(u,a)}})),this.randomIfMultipleIndex(i,n,s),n}randomIfMultipleIndex(e,i,r){if(e==0){let s;if(typeof this.nodes.get(i)=="string"){const n=this.nodes.get(i).split(","),o=Math.floor(Math.random()*n.length);s=n[o]}else s=this.nodes.get(i);r(s);return}}static createNewBoard(e,i,r){const s=[...e.getStates()],n=new y(s);return n.setState(i,r),n}}(function(){const t=document.querySelectorAll("#grid td"),e=document.getElementById("alert");let i,r,s;function n(){e.innerText="",e.classList.remove("alert-warning"),e.classList.remove("alert-success"),e.classList.remove("alert-danger"),e.classList.remove("alert-info")}function o(){return r.isTerminal()?(r.isTie()?(e.innerText="Vous avais fais match nul",e.classList.add("alert-warning")):r.winner()===1?(e.innerText="Vous avais gagner",e.classList.add("alert-success")):r.winner()===2?(e.innerText="Le bot \xE0 gagner",e.classList.add("alert-danger")):(e.innerText="Vous avais terminez la partie",e.classList.add("alert-info")),!0):!1}function f(a,d,m){n(),i!==h.Bot&&(r.hasStateAvailable(m)?r.setState(m,a?c.X:c.O)&&(d.classList.add(a?"x":"o"),o()||(i=h.Bot,s.playBestMove(r,0,!a,l=>{r.setState(l,a?c.O:c.X)&&(t[l].classList.add(a?"o":"x"),o()),i=h.Human}))):(e.innerText="Cette case n'est pas disponible, choisissez-en un autre !",e.classList.add("alert-danger")))}function p(a=-1,d=h.Human){n(),r=new y,s=new I(a);const m=Boolean(d);if(i=d,t.forEach((l,g)=>{l.classList.remove("x"),l.classList.remove("o"),l.onclick=function(){f(m,l,g)}}),d===h.Bot){const l=[0,2,4,6,8],g=l[Math.floor(Math.random()*l.length)];r.setState(g,m?c.O:c.X)&&t[g].classList.add(m?"o":"x"),i=h.Human}}function u(a){a.preventDefault();const{target:d}=a,l=d["starting-player"].selectedIndex,g=d["depth-difficulty"],w=g.selectedIndex,S=parseInt(g.options[w].value);p(S,l)}document.getElementById("form-options").addEventListener("submit",u)})();
